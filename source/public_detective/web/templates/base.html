<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
          content="Detetive Público - Auditoria de Licitações com IA">
    <meta name="keywords" content="licitações, auditoria, ia, compras públicas">
    <title>
      {% block title %}
        Detetive Público
      {% endblock title %}
    </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@400;500;600;700&display=swap"
          rel="stylesheet">
    <link rel="icon" href="{{ url_for('static', path='logo.svg') }}">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        heading: ['Outfit', 'sans-serif'],
                    },
                    colors: {
                        primary: 'rgb(var(--color-primary) / <alpha-value>)',
                        secondary: 'rgb(var(--color-secondary) / <alpha-value>)',
                        accent: 'rgb(var(--color-accent) / <alpha-value>)',
                        success: 'rgb(var(--color-success) / <alpha-value>)',
                        warning: 'rgb(var(--color-warning) / <alpha-value>)',
                        danger: 'rgb(var(--color-danger) / <alpha-value>)',
                        background: 'rgb(var(--color-background) / <alpha-value>)',
                        surface: 'rgb(var(--color-surface) / <alpha-value>)',
                        text: 'rgb(var(--color-text) / <alpha-value>)',
                        'text-muted': 'rgb(var(--color-text-muted) / <alpha-value>)',
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer base {
            :root {
                /* Light Theme */
                --color-primary: 255 255 255; /* white */
                --color-secondary: 241 245 249; /* slate-100 */
                --color-accent: 59 130 246; /* blue-500 */
                --color-success: 16 185 129; /* emerald-500 */
                --color-warning: 245 158 11; /* amber-500 */
                --color-danger: 239 68 68; /* red-500 */
                --color-background: 248 250 252; /* slate-50 */
                --color-surface: 255 255 255; /* white */
                --color-text: 15 23 42; /* slate-900 */
                --color-text-muted: 100 116 139; /* slate-500 */
            }

            .dark {
                /* Dark Theme */
                --color-primary: 15 23 42; /* slate-900 */
                --color-secondary: 30 41 59; /* slate-800 */
                --color-accent: 59 130 246; /* blue-500 */
                --color-success: 16 185 129; /* emerald-500 */
                --color-warning: 245 158 11; /* amber-500 */
                --color-danger: 239 68 68; /* red-500 */
                --color-background: 15 23 42; /* slate-900 */
                --color-surface: 30 41 59; /* slate-800 */
                --color-text: 226 232 240; /* slate-200 */
                --color-text-muted: 148 163 184; /* slate-400 */
            }
        }

        @layer utilities {
            .glass-panel {
                @apply bg-surface/80 backdrop-blur-md border border-text-muted/10 shadow-xl dark:bg-secondary/50 dark:border-white/10;
            }
        }

        body {
            @apply bg-background text-text antialiased transition-colors duration-300;
        }
    </style>
    <script>
        // On page load or when changing themes, best to add inline in `head` to avoid FOUC
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>
    {% block extra_head %}
    {% endblock extra_head %}
  </head>
  <body class="flex flex-col min-h-screen">
    <header class="sticky top-0 z-50 border-b transition-colors duration-300 border-text-muted/10 bg-surface/80 backdrop-blur-md dark:bg-primary/80 dark:border-white/10">
      <div class="container flex justify-between items-center px-4 mx-auto h-[76px]">
        <a href="{{ url_for("home") }}"
           class="flex gap-2 items-center md:gap-3 group">
          <img src="{{ url_for('static', path='logo.svg') }}"
               alt="Detetive Público Logo"
               width="56"
               height="56"
               class="w-14 h-14 transition-transform group-hover:scale-110">
          <span class="text-xl font-bold tracking-tight whitespace-nowrap dark:text-white text-text font-heading">Detetive <span class="text-accent">Público</span></span>
        </a>
        <nav>
          <ul class="flex gap-3 items-center md:gap-6">
            <li class="hidden md:block">
              <a href="{{ url_for("home") }}"
                 class="font-medium transition-colors hover:text-accent">Início</a>
            </li>
            <li>
              <a href="{{ url_for("analyses") }}"
                 class="font-medium transition-colors hover:text-accent">Análises</a>
            </li>
            <li>
              <button id="theme-toggle"
                      type="button"
                      class="p-1 rounded-lg transition-colors focus:ring-2 focus:outline-none text-text-muted hover:text-accent focus:ring-accent">
                <svg id="theme-toggle-dark-icon"
                     class="hidden w-5 h-5"
                     fill="currentColor"
                     viewBox="0 0 20 20"
                     xmlns="http://www.w3.org/2000/svg">
                  <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                </svg>
                <svg id="theme-toggle-light-icon"
                     class="hidden w-5 h-5"
                     fill="currentColor"
                     viewBox="0 0 20 20"
                     xmlns="http://www.w3.org/2000/svg">
                  <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 100 2h1z" fill-rule="evenodd" clip-rule="evenodd">
                  </path>
                </svg>
              </button>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <main class="container flex-grow py-8 px-4 mx-auto">
      {% block content %}
      {% endblock content %}
    </main>
    <footer class="mt-auto border-t transition-colors duration-300 bg-surface/50 border-text-muted/10 dark:bg-secondary/30 dark:border-white/10">
      <div class="container py-8 px-4 mx-auto text-sm text-center text-text-muted dark:text-slate-400">
        <p>© 2025 Detetive Público. Todos os direitos reservados.</p>
        <p class="mt-2">Desenvolvido para transparência em compras públicas.</p>
      </div>
    </footer>
  </body>
  <script>
    var themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
    var themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

    // Change the icons inside the button based on previous settings
    if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        themeToggleLightIcon.classList.remove('hidden');
    } else {
        themeToggleDarkIcon.classList.remove('hidden');
    }

    var themeToggleBtn = document.getElementById('theme-toggle');

    themeToggleBtn.addEventListener('click', function() {

        // toggle icons inside button
        themeToggleDarkIcon.classList.toggle('hidden');
        themeToggleLightIcon.classList.toggle('hidden');

        // if set via local storage previously
        if (localStorage.theme) {
            if (localStorage.theme === 'light') {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';
            } else {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';
            }

        // if NOT set via local storage previously
        } else {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';
            } else {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';
            }
        }

    });
  </script>
</html>
